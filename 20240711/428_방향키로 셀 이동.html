<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      td {
        width: 50px;
        height: 50px;
        border: 1px solid orchid;
        text-align: center;
        color: white;
        padding: 10px 10px;
      }
    </style>
  </head>
  <body>
    <h3>방향키로 셀 이동</h3>
    <hr />
    <table>
      <tr>
        <td>index==0</td>
        <td>index==1</td>
        <td>index==2</td>
      </tr>
      <tr>
        <td>index==3</td>
        <td>index==4</td>
        <td>index==5</td>
      </tr>
      <tr>
        <td>index==6</td>
        <td>index==7</td>
        <td>index==8</td>
      </tr>
    </table>

    <script>
      let prevIndex = 0,
        index = 0;
      let tds;

      window.onload = () => {
        tds = document.querySelectorAll("td");
        //DOM load당시 index===0 -> 초기 tds[0]인 부분에 색칠
        if (tds.length > index) {
          tds[index].style.backgroundColor = "orchid";
        }
      };

      window.onkeydown = (e) => {
        // 현재 셀 색상을 원래대로
        tds[index].style.backgroundColor = "white";

        //js에 내장되어 있는 이벤트 키값을 받아 에러처리와 값 변경
        switch (e.key) {
          case "ArrowDown":
            if (Math.floor(index / 3) >= 2) return;
            index += 3;
            break;
          case "ArrowUp":
            if (Math.floor(index / 3) < 1) return;
            index -= 3;
            break;
          case "ArrowLeft":
            if (index % 3 == 0) return;
            index--;
            break;
          case "ArrowRight":
            if (index % 3 == 2) return;
            index++;
            break;
        }

        tds[index].style.backgroundColor = "orchid"; // 새로운 셀 색상을 변경합니다.
      };
    </script>
  </body>
</html>
